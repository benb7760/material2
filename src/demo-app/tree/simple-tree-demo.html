
<mat-form-field  style="width: 500px;">
  <textarea matInput [(ngModel)]="data"></textarea>
</mat-form-field>
<!--<mat-slide-toggle [(ngModel)]="flat">Flat: {{flat}}</mat-slide-toggle>-->
<button mat-button (click)="submit()">Submit</button>

<div class="tree-container mat-elevation-z4">
  <cdk-tree #tree [dataSource]="dataSource" [treeControl]="treeControl">
    <!-- Row templates. The columns used are set at the row template level -->
    <cdk-node *cdkNodeDef="let node" [cdkNode]="node" (click)="currentNode=node">
        <!--<simple-tree-node [node]="node"-->
                          <!--[selection]="selection">-->
        <!--</simple-tree-node>-->

      <div class="row">
        <div class="space">
          <div *ngFor="let a of createArray(node.parentMap.length); let index = index" [class.special]="node.parentMap[index]"></div>
        </div>
        <div class="expand-trigger">
          <a mat-icon-button (click)="treeControl.toggleDecedents(node)" *ngIf="node.expandable">
            <mat-icon>{{ treeControl.expanded(node) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}</mat-icon>
          </a>
        </div>

        <mat-checkbox (click)="$event.stopPropagation()"
                     (change)="selectNode(node, $event)"
                     [checked]="selection.isSelected(node)">
          {{node.key}}<span *ngIf="node.value">: {{node.value}}</span> </mat-checkbox>
      </div>

    </cdk-node>
  </cdk-tree>
</div>

<div style="margin: 10px">
  <button mat-button color="primary" (click)="expandAll()">Expand All</button>
  <button mat-button color="primary" (click)="collapseAll()">Collapse All</button>
</div>

<div *ngIf="treeControl">
  Selected: <span *ngFor="let node of selection.selected">{{node.key}}: {{node.value}}, </span>
</div>


<!--<mat-card *ngIf="!!currentNode">-->
  <!--<mat-card-title>Add child node</mat-card-title>-->
  <!--<mat-form-field>-->
    <!--<input matInput [(ngModel)]="key" placeholder="Key"/>-->
  <!--</mat-form-field>-->
  <!--<mat-form-field>-->
    <!--<input matInput [(ngModel)]="value" placeholder="Value"/>-->
  <!--</mat-form-field>-->
  <!--<span> {{currentNode.key}} </span>-->
  <!--<button mat-button (click)="addChild()">Add Child</button>-->
<!--</mat-card>-->
